<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of AFQ_get</title>
  <meta name="keywords" content="AFQ_get">
  <meta name="description" content="Get value from afq structure">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../index.html">Home</a> &gt;  <a href="index.html">functions</a> &gt; AFQ_get.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../index.html"><img alt="<" border="0" src="../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for functions&nbsp;<img alt=">" border="0" src="../right.png"></a></td></tr></table>-->

<h1>AFQ_get
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>Get value from afq structure</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>function val = AFQ_get(afq, param, varargin) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre class="comment"> Get value from afq structure

 val = AFQ_get(afq, param, varargin)

 param list:              - arguments:

 'fiber group names'
 'number of images'
 'subject group'
 'patient data'
 'control data'
 'norms'
 'numfg'
 'number of patients'
 'number of controls'
 'number of subjects'
 'number of fibergroups'
 'track whole brain'     - [subject number]
 'wholebrain fg'         - [subject number]
 'segmentfibers'         - [subject number]
 'cleanfibers'           - [subject number]

 % To get the path to a fiber group
 'fgname path'           - [subject number]

 'computevals'           - [subject number]

 To get all the values for a particular measurement (eg. 'fa') for all the
 subjects or a group of subjects (eg. 'patients'). If no input is passed
 in for the group then it will return the values for all the subjects.
 'all vals'              - 'valname' , ['group']

 To get the values for a particular measurement (eg. 'fa') for a particlar
 tract for all the subjects or a group of subjects. For the different
 fiber group names see AFQ_get(afq, 'fgnames')
 'tractname'             - 'valname', 'group'
 'left arcuate'          - 'fa'     , 'controls'

 'use mrtrix'
 'dt6path'               - [subject number]
 'tracking parameters'
 'mrtrixpaths'           - [subject number]
 'show figures'
 'roi1 path'             - [fg number], [subject number]
 'roi2 path'             - [fg number], [subject number]
 'current subject'
 To get any of the parameters save in the afq structure (see AFQ_Create),
 enter the name of the parameter. Some have not been implimented yet, but
 will be soon.
 AFQ_get(afq,'fiberWeighting')

 Written by Jason D. Yeatman August 2012</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../matlabicon.gif)">
</ul>
This function is called by:
<ul style="list-style-image:url(../matlabicon.gif)">
<li><a href="AFQ_AddNewFiberGroup.html" class="code" title="function afq = AFQ_AddNewFiberGroup(afq,fgName,roi1Name,roi2Name,cleanFibers,computeVals)">AFQ_AddNewFiberGroup</a>	THIS FUNCTION IS STILL BEING DEVELOPED</li><li><a href="AFQ_ComputeNorms.html" class="code" title="function [norms, patient_data, control_data, afq] = AFQ_ComputeNorms(varargin)">AFQ_ComputeNorms</a>	Compute tract diffusion profile norms from control group data</li><li><a href="AFQ_ComputeTractProperties.html" class="code" title="function [fa, md, rd, ad, cl, TractProfile] = AFQ_ComputeTractProperties(fg_classified,dt,numberOfNodes,clip2rois,subDir, weighting, afq)">AFQ_ComputeTractProperties</a>	Compute diffusion properties along the trajectory of the fiber groups.</li><li><a href="AFQ_Create.html" class="code" title="function afq = AFQ_Create(varargin)">AFQ_Create</a>	Create AFQ structure and set default parameters</li><li><a href="AFQ_LoadROIs.html" class="code" title="function [roi1, roi2] = AFQ_LoadROIs(fgNumber,sub_dir, afq)">AFQ_LoadROIs</a>	Load the two ROIs used to define a fiber group</li><li><a href="AFQ_MakeFGProbabilityMap.html" class="code" title="function [fgPmap, fgEndPmap] = AFQ_MakeFGProbabilityMap(dtPaths,fgPaths,writeImage)">AFQ_MakeFGProbabilityMap</a>	Make a fiber tract probability map from fiber group segmentations</li><li><a href="AFQ_WholebrainTractography.html" class="code" title="function fg = AFQ_WholebrainTractography(dt,run_mode,params)">AFQ_WholebrainTractography</a>	Perform whole brain deterministic tractography within a white matter mask</li><li><a href="AFQ_pca.html" class="code" title="function [coeff, score, subMeans, latent] = AFQ_pca(afq, valname, group, demean)">AFQ_pca</a>	Perform principal components analysis on AFQ Tract Profiles</li><li><a href="AFQ_plot.html" class="code" title="function AFQ_plot(varargin)">AFQ_plot</a>	This function will plot AFQ results in a variety of ways</li><li><a href="AFQ_run.html" class="code" title="function [afq patient_data control_data norms abn abnTracts] = AFQ_run(sub_dirs, sub_group, afq)">AFQ_run</a>	Run AFQ analysis on a set of subjects to generate Tract Profiles of white</li><li><a href="AFQ_set.html" class="code" title="function afq = AFQ_set(afq,param,varargin)">AFQ_set</a>	Set properties of afq object</li><li><a href="../test/AFQ_test.html" class="code" title="function AFQ_test">AFQ_test</a>	Perform unit testing on all the AFQ functions.</li></ul>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function val = AFQ_get(afq, param, varargin)</a>
0002 <span class="comment">% Get value from afq structure</span>
0003 <span class="comment">%</span>
0004 <span class="comment">% val = AFQ_get(afq, param, varargin)</span>
0005 <span class="comment">%</span>
0006 <span class="comment">% param list:              - arguments:</span>
0007 <span class="comment">%</span>
0008 <span class="comment">% 'fiber group names'</span>
0009 <span class="comment">% 'number of images'</span>
0010 <span class="comment">% 'subject group'</span>
0011 <span class="comment">% 'patient data'</span>
0012 <span class="comment">% 'control data'</span>
0013 <span class="comment">% 'norms'</span>
0014 <span class="comment">% 'numfg'</span>
0015 <span class="comment">% 'number of patients'</span>
0016 <span class="comment">% 'number of controls'</span>
0017 <span class="comment">% 'number of subjects'</span>
0018 <span class="comment">% 'number of fibergroups'</span>
0019 <span class="comment">% 'track whole brain'     - [subject number]</span>
0020 <span class="comment">% 'wholebrain fg'         - [subject number]</span>
0021 <span class="comment">% 'segmentfibers'         - [subject number]</span>
0022 <span class="comment">% 'cleanfibers'           - [subject number]</span>
0023 <span class="comment">%</span>
0024 <span class="comment">% % To get the path to a fiber group</span>
0025 <span class="comment">% 'fgname path'           - [subject number]</span>
0026 <span class="comment">%</span>
0027 <span class="comment">% 'computevals'           - [subject number]</span>
0028 <span class="comment">%</span>
0029 <span class="comment">% To get all the values for a particular measurement (eg. 'fa') for all the</span>
0030 <span class="comment">% subjects or a group of subjects (eg. 'patients'). If no input is passed</span>
0031 <span class="comment">% in for the group then it will return the values for all the subjects.</span>
0032 <span class="comment">% 'all vals'              - 'valname' , ['group']</span>
0033 <span class="comment">%</span>
0034 <span class="comment">% To get the values for a particular measurement (eg. 'fa') for a particlar</span>
0035 <span class="comment">% tract for all the subjects or a group of subjects. For the different</span>
0036 <span class="comment">% fiber group names see AFQ_get(afq, 'fgnames')</span>
0037 <span class="comment">% 'tractname'             - 'valname', 'group'</span>
0038 <span class="comment">% 'left arcuate'          - 'fa'     , 'controls'</span>
0039 <span class="comment">%</span>
0040 <span class="comment">% 'use mrtrix'</span>
0041 <span class="comment">% 'dt6path'               - [subject number]</span>
0042 <span class="comment">% 'tracking parameters'</span>
0043 <span class="comment">% 'mrtrixpaths'           - [subject number]</span>
0044 <span class="comment">% 'show figures'</span>
0045 <span class="comment">% 'roi1 path'             - [fg number], [subject number]</span>
0046 <span class="comment">% 'roi2 path'             - [fg number], [subject number]</span>
0047 <span class="comment">% 'current subject'</span>
0048 <span class="comment">% To get any of the parameters save in the afq structure (see AFQ_Create),</span>
0049 <span class="comment">% enter the name of the parameter. Some have not been implimented yet, but</span>
0050 <span class="comment">% will be soon.</span>
0051 <span class="comment">% AFQ_get(afq,'fiberWeighting')</span>
0052 <span class="comment">%</span>
0053 <span class="comment">% Written by Jason D. Yeatman August 2012</span>
0054 
0055 <span class="comment">% remove spaces and upper case</span>
0056 param = mrvParamFormat(param);
0057 <span class="comment">% Get the names of all the fiber groups without spaces or capitals</span>
0058 fgnames = cell(1,length(afq.fgnames));
0059 <span class="keyword">for</span> jj = 1:length(fgnames)
0060     fgnames{jj} = mrvParamFormat(afq.fgnames{jj});
0061 <span class="keyword">end</span>
0062 
0063 <span class="comment">%% Get the requested parameter</span>
0064 <span class="keyword">switch</span>(param)
0065     <span class="keyword">case</span>{<span class="string">'fibergroupnames'</span> <span class="string">'fgnames'</span>}
0066         val = afq.fgnames;
0067     <span class="keyword">case</span>{<span class="string">'numimages'</span>, <span class="string">'numberofimages'</span>}
0068         val = length(afq.files.images);
0069     <span class="keyword">case</span>({<span class="string">'sub_group'</span> <span class="string">'subgroup'</span> <span class="string">'subjectgroup'</span>})
0070         val = afq.sub_group;
0071     <span class="keyword">case</span>({<span class="string">'patient_data'</span> <span class="string">'patientdata'</span>})
0072         val = afq.patient_data;
0073     <span class="keyword">case</span>({<span class="string">'control_data'</span> <span class="string">'controldata'</span>})
0074         val = afq.control_data;
0075     <span class="keyword">case</span>(<span class="string">'norms'</span>)
0076         val = afq.norms;
0077     <span class="keyword">case</span>({<span class="string">'numberofpatients'</span> <span class="string">'numpatients'</span>})
0078         val = sum(afq.sub_group);
0079     <span class="keyword">case</span>({<span class="string">'numberofcontrols'</span> <span class="string">'numcontrols'</span>});
0080         val = sum(afq.sub_group == 0);
0081     <span class="keyword">case</span>({<span class="string">'numberofsubjects'</span> <span class="string">'numsubjects'</span> <span class="string">'numsubs'</span> <span class="string">'nsubs'</span>})
0082         val = length(afq.sub_group);
0083     <span class="keyword">case</span>({<span class="string">'numberoffibergroups'</span> <span class="string">'numfg'</span> <span class="string">'numfibergroups'</span> <span class="string">'nfg'</span> <span class="string">'numberfibergroups'</span>});
0084         val = length(afq.fgnames);
0085     <span class="keyword">case</span>{<span class="string">'dotracking'</span> <span class="string">'trackfibers'</span> <span class="string">'track'</span>}
0086         <span class="comment">% Check if user wants to overwrite wholebrain tractography or</span>
0087         <span class="comment">% Wholebrain fiber group has not been tracked</span>
0088         val = logical(afq.overwrite.fibers.wholebrain(varargin{1})) || <span class="keyword">...</span>
0089             isempty(afq.files.fibers.wholebrain{varargin{1}}) || <span class="keyword">...</span>
0090             ~ischar(afq.files.fibers.wholebrain{varargin{1}});
0091     <span class="keyword">case</span>{<span class="string">'wholebrainfibergroup'</span> <span class="string">'wholebrain'</span> <span class="string">'wholebrainfg'</span>}
0092         val = dtiReadFibers(afq.files.fibers.wholebrain{varargin{1}});
0093     <span class="keyword">case</span>{<span class="string">'dosegmentation'</span>}
0094         <span class="comment">% Check if user wants to overwrite segmented fibers or</span>
0095         <span class="comment">% Fibers have not yet been segmented</span>
0096         val = logical(afq.overwrite.fibers.segmented(varargin{1})) || <span class="keyword">...</span>
0097             isempty(afq.files.fibers.segmented{varargin{1}}) || <span class="keyword">...</span>
0098             ~ischar(afq.files.fibers.segmented{varargin{1}});
0099     <span class="keyword">case</span>{<span class="string">'segmentedfibers'</span> <span class="string">'morigroups'</span>}
0100         val = dtiReadFibers(afq.files.fibers.segmented{varargin{1}});
0101     <span class="keyword">case</span> horzcat(strcat(fgnames,<span class="string">'path'</span>))
0102         <span class="comment">% find the fiber group number</span>
0103         n = find(strcmpi(param(1:end-4),fgnames));
0104         <span class="keyword">if</span> n &lt;= 20
0105             <span class="comment">% If it is one of the mori groups than get the path to that</span>
0106             <span class="comment">% fiber group (preferably cleaned)</span>
0107             <span class="keyword">try</span>
0108                 val = afq.files.fibers.clean{varargin{1}};
0109             <span class="keyword">catch</span>
0110                 val = afq.files.fibers.segmented{varargin{1}};
0111             <span class="keyword">end</span>
0112         <span class="keyword">else</span>
0113             <span class="comment">% get the name (because we formated the parameter)</span>
0114             name = afq.fgnames{n};
0115             <span class="keyword">try</span>
0116                 val = afq.files.fibers.([name <span class="string">'clean'</span>]){varargin{1}};
0117             <span class="keyword">catch</span>
0118                 val = afq.files.fibers.(name){varargin{1}};
0119             <span class="keyword">end</span>
0120         <span class="keyword">end</span>
0121     <span class="keyword">case</span>{<span class="string">'docleaning'</span>}
0122         <span class="comment">% Check if user wants to overwrite cleaned fibers for this subject or</span>
0123         <span class="comment">% Fibers have not yet been cleaned</span>
0124         val = logical(afq.overwrite.fibers.clean(varargin{1})) || <span class="keyword">...</span>
0125             isempty(afq.files.fibers.clean{varargin{1}}) || <span class="keyword">...</span>
0126             ~ischar(afq.files.fibers.clean{varargin{1}});
0127     <span class="keyword">case</span>{<span class="string">'cleanfibers'</span> <span class="string">'cleanedfibers'</span> <span class="string">'cleanfg'</span>}
0128         val = dtiReadFibers(afq.files.fibers.clean{varargin{1}});
0129     <span class="keyword">case</span>{<span class="string">'computevals'</span> <span class="string">'computeprofiles'</span> <span class="string">'computetractprofiles'</span> <span class="string">'compute'</span>}
0130         <span class="comment">% Check if user wants to overwrite values for this subject or</span>
0131         <span class="comment">% No values have been computed yet or</span>
0132         <span class="comment">% Values have not yet been computed for this subject</span>
0133         val = logical(afq.overwrite.vals(varargin{1})) || <span class="keyword">...</span>
0134             isempty(afq.vals.fa) || <span class="keyword">...</span>
0135             size(afq.vals.fa{1},1) &lt; varargin{1};
0136     <span class="keyword">case</span>{<span class="string">'vals'</span> <span class="string">'allvals'</span> <span class="string">'valsall'</span> fgnames{:}}
0137         <span class="comment">% Check if the user defined a specific fiber group and if so get</span>
0138         <span class="comment">% that fiber group number</span>
0139         fgNum = find(strcmpi(param,fgnames));
0140         <span class="keyword">if</span> ~exist(<span class="string">'varargin'</span> ,<span class="string">'var'</span>) || isempty(varargin)
0141             error(<span class="string">'Need to define which value: AFQ_get(afq,''vals'',''fa'')'</span>);
0142             <span class="comment">% Three arguments means that the user defined the value they</span>
0143             <span class="comment">% want but no group</span>
0144         <span class="keyword">elseif</span>(nargin == 3)
0145             <span class="comment">% First argument is the value name</span>
0146             valnames = fieldnames(afq.vals);
0147             v = find(strcmpi(varargin{1},valnames));
0148             <span class="keyword">if</span> ~isempty(v)
0149                 valname = valnames{v};
0150                 <span class="comment">% If a specific fiber group was defined get vals for that</span>
0151                 <span class="comment">% group</span>
0152                 <span class="keyword">if</span> ~isempty(fgNum) &amp;&amp; length(afq.vals.(valname)) &gt;= fgNum
0153                     val = afq.vals.(valname){fgNum};
0154                 <span class="keyword">elseif</span> ~isempty(fgNum)
0155                     error(<span class="string">'%s values do not exist'</span>,fgnames{fgNum});
0156                 <span class="keyword">else</span>
0157                     <span class="comment">% Otherwise get vals for all groups</span>
0158                     val = horzcat(afq.vals.(valname){:});
0159                 <span class="keyword">end</span>
0160             <span class="keyword">else</span>
0161                 error(<span class="string">'%s values do not exist'</span>,varargin{1})
0162             <span class="keyword">end</span>
0163             <span class="comment">% Four arguments means the user also defined the group</span>
0164         <span class="keyword">elseif</span>(nargin == 4)
0165             <span class="comment">% Second argument is the subject group</span>
0166             <span class="keyword">switch</span>(varargin{2})
0167                 <span class="keyword">case</span>{<span class="string">'patient'</span>,<span class="string">'patients'</span>, 1}
0168                     valnames = fieldnames(afq.patient_data);
0169                     v = find(strcmpi(varargin{1},valnames));
0170                     <span class="keyword">if</span> ~isempty(v)
0171                         valname = valnames{v};
0172                         <span class="comment">% If a specific fiber group was defined get vals for that</span>
0173                         <span class="comment">% group</span>
0174                         <span class="keyword">if</span> ~isempty(fgNum) &amp;&amp; length(afq.patient_data) &gt;= fgNum
0175                             val = afq.patient_data(fgNum).(valname);
0176                         <span class="keyword">elseif</span> ~isempty(fgNum)
0177                             error(<span class="string">'%s values do not exist'</span>,fgnames{fgNum});
0178                         <span class="keyword">else</span>
0179                             <span class="comment">% Otherwise get vals for all groups</span>
0180                             val = horzcat(afq.patient_data(:).(valname));
0181                         <span class="keyword">end</span>
0182                     <span class="keyword">else</span>
0183                         error(<span class="string">'%s values do not exist'</span>,varargin{1})
0184                     <span class="keyword">end</span>
0185                 <span class="keyword">case</span>{<span class="string">'control'</span>,<span class="string">'controls'</span>, 0}
0186                     valnames = fieldnames(afq.control_data);
0187                     v = find(strcmpi(varargin{1},valnames));
0188                     <span class="keyword">if</span> ~isempty(v)
0189                         valname = valnames{strcmpi(varargin{1},valnames)};
0190                         <span class="comment">% If a specific fiber group was defined get vals for that</span>
0191                         <span class="comment">% group</span>
0192                         <span class="keyword">if</span> ~isempty(fgNum) &amp;&amp; length(afq.control_data) &gt;= fgNum
0193                             val = afq.control_data(fgNum).(valname);
0194                         <span class="keyword">elseif</span> ~isempty(fgNum)
0195                             error(<span class="string">'%s values do not exist'</span>,fgnames{fgNum});
0196                         <span class="keyword">else</span>
0197                             <span class="comment">% Otherwise get vals for all groups</span>
0198                             val = horzcat(afq.control_data(:).(valname));
0199                         <span class="keyword">end</span>
0200                     <span class="keyword">else</span>
0201                         error(<span class="string">'%s values do not exist'</span>,varargin{1})
0202                     <span class="keyword">end</span>
0203                 <span class="keyword">otherwise</span>
0204                     error(<span class="string">'Do you want vals for patients or controls?'</span>)
0205             <span class="keyword">end</span>
0206         <span class="keyword">end</span>
0207     <span class="keyword">case</span>{<span class="string">'usemrtrix'</span>}
0208         <span class="keyword">if</span> afq.software.mrtrix == 1 &amp;&amp; <span class="keyword">...</span>
0209                 strcmp(<span class="string">'mrtrix'</span>,afq.params.track.algorithm)<span class="keyword">...</span>
0210                 &amp;&amp; afq.params.computeCSD == 1;
0211             val = true;
0212         <span class="keyword">else</span>
0213             val = false;
0214         <span class="keyword">end</span>
0215     <span class="keyword">case</span>{<span class="string">'dt6path'</span>}
0216         <span class="comment">% If a subject number was input then get the dt6path for that</span>
0217         <span class="comment">% subject</span>
0218         <span class="keyword">if</span> nargin == 3
0219             val = afq.files.dt6{varargin{1}};
0220             <span class="comment">% Otherwise return a cell array of paths for all subjects</span>
0221         <span class="keyword">else</span>
0222             val  = afq.files.dt6;
0223         <span class="keyword">end</span>
0224     <span class="keyword">case</span>{<span class="string">'trackingparameters'</span>}
0225         val = afq.params.track;
0226     <span class="keyword">case</span>{<span class="string">'mrtrixpath'</span> <span class="string">'mrtrixpaths'</span>}
0227         val.csd = afq.files.mrtrix.csd{varargin{1}};
0228         val.wm  = afq.files.mrtrix.wm{varargin{1}};
0229     <span class="keyword">case</span>{<span class="string">'showfigures'</span> <span class="string">'showfigs'</span>}
0230         val = logical(afq.params.showfigs);
0231     <span class="keyword">case</span>{<span class="string">'fiberweighting'</span>}
0232         val = afq.params.fiberWeighting;
0233     <span class="keyword">case</span> {<span class="string">'roi1'</span> <span class="string">'roi1path'</span>}
0234         <span class="keyword">if</span> nargin~=4
0235             error(<span class="string">'correct call: AFQ_get(afq, ''roi1'',[roi number], [subject number])'</span>)
0236         <span class="keyword">else</span>
0237             <span class="comment">% varargin{1} is the roi number varargin{2} is the subject number</span>
0238             val = fullfile(afq.sub_dirs{varargin{2}},<span class="string">'ROIs'</span>,afq.roi1names{varargin{1}});
0239         <span class="keyword">end</span>
0240     <span class="keyword">case</span> {<span class="string">'roi2'</span> <span class="string">'roi2path'</span>}
0241         <span class="keyword">if</span> nargin~=4
0242             error(<span class="string">'correct call: AFQ_get(afq, ''roi1'',[roi number], [subject number])'</span>)
0243         <span class="keyword">else</span>
0244             <span class="comment">% varargin{1} is the roi number varargin{2} is the subject number</span>
0245             val = fullfile(afq.sub_dirs{varargin{2}},<span class="string">'ROIs'</span>,afq.roi2names{varargin{1}});
0246         <span class="keyword">end</span>
0247     <span class="keyword">case</span> {<span class="string">'currentsubject'</span> <span class="string">'cursub'</span>}
0248         val = afq.currentsub;
0249     <span class="keyword">otherwise</span>
0250         error(<span class="string">'Uknown afq parameter'</span>);
0251 <span class="keyword">end</span>
0252 
0253 <span class="keyword">return</span></pre></div>
<hr><address>Generated on Wed 05-Dec-2012 12:03:42 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005</address>
</body>
</html>