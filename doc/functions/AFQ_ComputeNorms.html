<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of AFQ_ComputeNorms</title>
  <meta name="keywords" content="AFQ_ComputeNorms">
  <meta name="description" content="Compute tract diffusion profile norms from control group data">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../index.html">Home</a> &gt;  <a href="index.html">functions</a> &gt; AFQ_ComputeNorms.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../index.html"><img alt="<" border="0" src="../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for functions&nbsp;<img alt=">" border="0" src="../right.png"></a></td></tr></table>-->

<h1>AFQ_ComputeNorms
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>Compute tract diffusion profile norms from control group data</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>function [norms, patient_data, control_data, afq] = AFQ_ComputeNorms(varargin) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre class="comment"> Compute tract diffusion profile norms from control group data

 [norms, patient_data, control_data, afq] = AFQ_ComputeNorms(afq)
 or
 [norms, patient_data, control_data] = AFQ_ComputeNorms(groupFA, groupMD, groupRD, groupAD, groupCL, sub_group)

 This function can be called in 2 ways. Either with an afq structure as
 the input or with cell arrays of all the values and a subject grouping
 variable. Data will be separated into patient and control data, norms
 will be calculated and returned and if an afq structure was passed in
 then it will be modified to contain the new information.

 Inputs:
 afq       = An afq structure containing values and tract profiles for all
             subjects. See AFQ_Create and AFQ_run
 groupFA   = Cell array of FA values for each subject's fiber tracts
 groupRD   = Cell array of RD values for each subject's fiber tracts
 groupAD   = Cell array of AD values for each subject's fiber tracts
 groupCL   = Cell array of CL values for each subject's fiber tracts
 sub_group = 0 or 1 denoting whether subject's are patients (1) or
             controls (0)

 Outputs:
 norms        = means and standard deviations for each point on each fiber
                tract
 patient_data = Data for the patients
 control_data = Data for the controls
 afq          = afq structure with new fields containing the norms,
                patient and control group data</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../matlabicon.gif)">
<li><a href="AFQ_get.html" class="code" title="function val = AFQ_get(afq, param, varargin)">AFQ_get</a>	Get value from afq structure</li><li><a href="AFQ_set.html" class="code" title="function afq = AFQ_set(afq,param,varargin)">AFQ_set</a>	Set properties of afq object</li></ul>
This function is called by:
<ul style="list-style-image:url(../matlabicon.gif)">
<li><a href="AFQ_AddNewFiberGroup.html" class="code" title="function afq = AFQ_AddNewFiberGroup(afq,fgName,roi1Name,roi2Name,cleanFibers,computeVals)">AFQ_AddNewFiberGroup</a>	THIS FUNCTION IS STILL BEING DEVELOPED</li><li><a href="AFQ_run.html" class="code" title="function [afq patient_data control_data norms abn abnTracts] = AFQ_run(sub_dirs, sub_group, afq)">AFQ_run</a>	Run AFQ analysis on a set of subjects to generate Tract Profiles of white</li></ul>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function [norms, patient_data, control_data, afq] = AFQ_ComputeNorms(varargin)</a>
0002 <span class="comment">% Compute tract diffusion profile norms from control group data</span>
0003 <span class="comment">%</span>
0004 <span class="comment">% [norms, patient_data, control_data, afq] = AFQ_ComputeNorms(afq)</span>
0005 <span class="comment">% or</span>
0006 <span class="comment">% [norms, patient_data, control_data] = AFQ_ComputeNorms(groupFA, groupMD, groupRD, groupAD, groupCL, sub_group)</span>
0007 <span class="comment">%</span>
0008 <span class="comment">% This function can be called in 2 ways. Either with an afq structure as</span>
0009 <span class="comment">% the input or with cell arrays of all the values and a subject grouping</span>
0010 <span class="comment">% variable. Data will be separated into patient and control data, norms</span>
0011 <span class="comment">% will be calculated and returned and if an afq structure was passed in</span>
0012 <span class="comment">% then it will be modified to contain the new information.</span>
0013 <span class="comment">%</span>
0014 <span class="comment">% Inputs:</span>
0015 <span class="comment">% afq       = An afq structure containing values and tract profiles for all</span>
0016 <span class="comment">%             subjects. See AFQ_Create and AFQ_run</span>
0017 <span class="comment">% groupFA   = Cell array of FA values for each subject's fiber tracts</span>
0018 <span class="comment">% groupRD   = Cell array of RD values for each subject's fiber tracts</span>
0019 <span class="comment">% groupAD   = Cell array of AD values for each subject's fiber tracts</span>
0020 <span class="comment">% groupCL   = Cell array of CL values for each subject's fiber tracts</span>
0021 <span class="comment">% sub_group = 0 or 1 denoting whether subject's are patients (1) or</span>
0022 <span class="comment">%             controls (0)</span>
0023 <span class="comment">%</span>
0024 <span class="comment">% Outputs:</span>
0025 <span class="comment">% norms        = means and standard deviations for each point on each fiber</span>
0026 <span class="comment">%                tract</span>
0027 <span class="comment">% patient_data = Data for the patients</span>
0028 <span class="comment">% control_data = Data for the controls</span>
0029 <span class="comment">% afq          = afq structure with new fields containing the norms,</span>
0030 <span class="comment">%                patient and control group data</span>
0031 
0032 <span class="keyword">if</span> nargin == 1
0033     afq = varargin{1};
0034     <span class="comment">% Compute the norms and add them to the afq structure. This call also</span>
0035     <span class="comment">% separates the patient and control data and adds these fields to the</span>
0036     <span class="comment">% afq structure</span>
0037     afq = <a href="AFQ_set.html" class="code" title="function afq = AFQ_set(afq,param,varargin)">AFQ_set</a>(afq,<span class="string">'norms'</span>);
0038     <span class="comment">% Get the norms, patient and control data from the afq structure</span>
0039     norms = <a href="AFQ_get.html" class="code" title="function val = AFQ_get(afq, param, varargin)">AFQ_get</a>(afq,<span class="string">'norms'</span>);
0040     patient_data = <a href="AFQ_get.html" class="code" title="function val = AFQ_get(afq, param, varargin)">AFQ_get</a>(afq,<span class="string">'patient_data'</span>);
0041     control_data = <a href="AFQ_get.html" class="code" title="function val = AFQ_get(afq, param, varargin)">AFQ_get</a>(afq,<span class="string">'control_data'</span>);
0042 <span class="keyword">elseif</span> nargin == 6
0043     <span class="comment">% If no afq structure was provided than assume inputs are Tract Diffusion</span>
0044     <span class="comment">% Profiles</span>
0045     groupFA = varargin{1}; groupMD = varargin{2}; groupRD = varargin{3};
0046     groupAD = varargin{4}; groupCL = varargin{5}; sub_group = varargin{6};
0047     
0048     <span class="comment">% Loop over fiber tracts and compute norms</span>
0049     <span class="keyword">for</span> jj=1:length(groupFA)
0050         
0051         norms.meanFA(:,jj)  = nanmean(groupFA{jj}(sub_group==0,:));
0052         norms.sdFA(:,jj)    = nanstd(groupFA{jj}(sub_group==0,:));
0053         patient_data(jj).FA = groupFA{jj}(sub_group==1,:);
0054         control_data(jj).FA = groupFA{jj}(sub_group==0,:);
0055         
0056         norms.meanMD(:,jj)  = nanmean(groupMD{jj}(sub_group==0,:));
0057         norms.sdMD(:,jj)    = nanstd(groupMD{jj}(sub_group==0,:));
0058         patient_data(jj).MD = groupMD{jj}(sub_group==1,:);
0059         control_data(jj).MD = groupMD{jj}(sub_group==0,:);
0060         
0061         norms.meanRD(:,jj)  = nanmean(groupRD{jj}(sub_group==0,:));
0062         norms.sdRD(:,jj)    = nanstd(groupRD{jj}(sub_group==0,:));
0063         patient_data(jj).RD = groupRD{jj}(sub_group==1,:);
0064         control_data(jj).RD = groupRD{jj}(sub_group==0,:);
0065         
0066         norms.meanAD(:,jj)  = nanmean(groupAD{jj}(sub_group==0,:));
0067         norms.sdAD(:,jj)    = nanstd(groupAD{jj}(sub_group==0,:));
0068         patient_data(jj).AD = groupAD{jj}(sub_group==1,:);
0069         control_data(jj).AD = groupAD{jj}(sub_group==0,:);
0070         
0071         norms.meanCL(:,jj)  = nanmean(groupCL{jj}(sub_group==0,:));
0072         norms.sdCL(:,jj)    = nanstd(groupCL{jj}(sub_group==0,:));
0073         patient_data(jj).CL = groupCL{jj}(sub_group==1,:);
0074         control_data(jj).CL = groupCL{jj}(sub_group==0,:);
0075         
0076     <span class="keyword">end</span>
0077 <span class="keyword">else</span>
0078     error(<span class="string">'impropper number of input arguments'</span>);
0079 <span class="keyword">end</span></pre></div>
<hr><address>Generated on Wed 05-Dec-2012 12:03:42 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005</address>
</body>
</html>